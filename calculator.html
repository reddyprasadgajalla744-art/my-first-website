<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific & Matrix Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .tab-btn { @apply px-4 py-2 font-semibold text-gray-600 border-b-2 border-transparent hover:bg-gray-100; }
        .tab-btn.active { @apply text-indigo-600 border-indigo-600; }
        .matrix-input { @apply w-16 h-16 text-center text-lg font-semibold border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none; }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen py-8">

    <div class="w-full max-w-sm mx-auto">
        <div class="bg-white rounded-2xl shadow-lg p-6">
            
            <!-- Tab Navigation -->
            <div class="flex border-b mb-4">
                <button id="standard-tab" class="tab-btn active">Standard</button>
                <button id="matrix-tab" class="tab-btn">Matrix</button>
            </div>

            <!-- Standard Calculator Container -->
            <div id="standard-calculator">
                <input type="text" id="display" class="w-full bg-gray-200 text-gray-900 text-4xl text-right font-bold rounded-lg px-4 py-3 mb-6" readonly>
                <div id="buttons" class="grid grid-cols-5 gap-3">
                    <!-- Standard calculator buttons will be dynamically inserted here by JS -->
                </div>
            </div>

            <!-- Matrix Calculator Container -->
            <div id="matrix-calculator" class="hidden">
                <!-- Matrix A Input -->
                <div class="mb-4">
                    <h3 class="font-bold mb-2 text-center">Matrix A</h3>
                    <div class="grid grid-cols-2 gap-2 w-max mx-auto">
                        <input type="number" id="a00" class="matrix-input" value="1">
                        <input type="number" id="a01" class="matrix-input" value="2">
                        <input type="number" id="a10" class="matrix-input" value="3">
                        <input type="number" id="a11" class="matrix-input" value="4">
                    </div>
                </div>

                <!-- Matrix B Input -->
                <div class="mb-4">
                    <h3 class="font-bold mb-2 text-center">Matrix B</h3>
                    <div class="grid grid-cols-2 gap-2 w-max mx-auto">
                        <input type="number" id="b00" class="matrix-input" value="5">
                        <input type="number" id="b01" class="matrix-input" value="6">
                        <input type="number" id="b10" class="matrix-input" value="7">
                        <input type="number" id="b11" class="matrix-input" value="8">
                    </div>
                </div>

                <!-- Matrix Operations -->
                <div class="grid grid-cols-3 gap-2 mb-4">
                    <button id="mat-add" class="bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600">A + B</button>
                    <button id="mat-sub" class="bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600">A - B</button>
                    <button id="mat-mul" class="bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600">A * B</button>
                    <button id="mat-det" class="bg-gray-500 text-white p-2 rounded-md hover:bg-gray-600">det(A)</button>
                    <button id="mat-inv" class="bg-gray-500 text-white p-2 rounded-md hover:bg-gray-600">inv(A)</button>
                    <button id="mat-trans" class="bg-gray-500 text-white p-2 rounded-md hover:bg-gray-600">T(A)</button>
                </div>

                <!-- Result Display -->
                <div>
                    <h3 class="font-bold mb-2 text-center">Result</h3>
                    <div id="result-matrix" class="grid grid-cols-2 gap-2 w-max mx-auto p-2 bg-gray-100 rounded-md">
                        <div id="r00" class="matrix-input bg-gray-200 flex items-center justify-center">0</div>
                        <div id="r01" class="matrix-input bg-gray-200 flex items-center justify-center">0</div>
                        <div id="r10" class="matrix-input bg-gray-200 flex items-center justify-center">0</div>
                        <div id="r11" class="matrix-input bg-gray-200 flex items-center justify-center">0</div>
                    </div>
                    <p id="scalar-result" class="text-center font-bold text-2xl mt-2 h-8"></p>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-6">
            <a href="index.html" class="text-indigo-600 font-semibold hover:underline">&larr; Back to Portfolio</a>
        </div>
    </div>

<script>
    // --- GLOBAL SETUP ---
    const standardTab = document.getElementById('standard-tab');
    const matrixTab = document.getElementById('matrix-tab');
    const standardCalculator = document.getElementById('standard-calculator');
    const matrixCalculator = document.getElementById('matrix-calculator');

    // --- TAB SWITCHING LOGIC ---
    standardTab.addEventListener('click', () => {
        standardTab.classList.add('active');
        matrixTab.classList.remove('active');
        standardCalculator.classList.remove('hidden');
        matrixCalculator.classList.add('hidden');
    });

    matrixTab.addEventListener('click', () => {
        matrixTab.classList.add('active');
        standardTab.classList.remove('active');
        matrixCalculator.classList.remove('hidden');
        standardCalculator.classList.add('hidden');
    });

    // --- STANDARD CALCULATOR LOGIC ---
    const display = document.getElementById('display');
    const buttonsContainer = document.getElementById('buttons');
    let currentInput = '';
    
    // Dynamically create standard calculator buttons
    const standardButtonsLayout = [
        'sin', 'cos', 'tan', 'log', '%', // Replaced 'ln' with '%'
        'sqrt', '^', 'pi', '(', ')',
        'C', '7', '8', '9', '/',
        'del', '4', '5', '6', '*',
        '1', '2', '3', '-', '=',
        '0', '.', '+'
    ];
    
    // Define styles for different button types
    const buttonStyles = {
        'default': 'bg-gray-200 hover:bg-gray-300',
        'operator': 'bg-indigo-500 hover:bg-indigo-600 text-white',
        'clear': 'bg-red-500 hover:bg-red-600 text-white',
        'equals': 'bg-green-500 hover:bg-green-600 text-white',
        'sci': 'bg-gray-300 hover:bg-gray-400 text-gray-900',
    };
    
    function getButtonStyle(value) {
        if (['/', '*', '-', '+'].includes(value)) return buttonStyles.operator;
        if (value === '=') return buttonStyles.equals;
        if (value === 'C' || value === 'del') return buttonStyles.clear;
        if (['sin','cos','tan','log','%','sqrt','^','pi','(',')'].includes(value)) return buttonStyles.sci; // Added '%'
        return buttonStyles.default;
    }
    
    function getButtonSpan(value) {
        if (value === '0') return 'col-span-2';
        if (value === '=') return 'row-span-2';
        return '';
    }

    standardButtonsLayout.forEach(val => {
        const button = document.createElement('button');
        button.className = `calculator-btn text-xl font-bold rounded-lg p-3 transition-colors duration-200 flex items-center justify-center ${getButtonStyle(val)} ${getButtonSpan(val)}`;
        button.dataset.value = val;
        button.innerHTML = val === 'sqrt' ? '√' : (val === '^' ? 'x²' : val === 'pi' ? 'π' : val);
        buttonsContainer.appendChild(button);
    });

    buttonsContainer.addEventListener('click', (event) => {
        if (event.target.matches('button')) handleStandardInput(event.target.dataset.value);
    });

    function handleStandardInput(value) {
        if (value === 'C') { currentInput = ''; } 
        else if (value === 'del') { currentInput = currentInput.slice(0, -1); }
        else if (value === '%') { // NEW: Logic for percentage
            try {
                currentInput = (eval(currentInput) / 100).toString();
            } catch (error) {
                currentInput = 'Error';
            }
        }
        else if (value === '=') {
            try {
                let evalInput = currentInput.replace(/sin/g, 'Math.sin').replace(/cos/g, 'Math.cos').replace(/tan/g, 'Math.tan').replace(/log/g, 'Math.log10').replace(/sqrt/g, 'Math.sqrt').replace(/pi/g, 'Math.PI').replace(/\^/g, '**2');
                const result = eval(evalInput);
                currentInput = result.toString();
            } catch (error) { currentInput = 'Error'; }
        } 
        else if (['sin', 'cos', 'tan', 'log', 'sqrt'].includes(value)) { currentInput += value + '('; }
        else if (value === 'pi') { currentInput += 'pi'; }
        else { currentInput += value; }
        display.value = currentInput;
    }

    // --- MATRIX CALCULATOR LOGIC ---
    function readMatrix(prefix) {
        const m = [[0, 0], [0, 0]];
        m[0][0] = parseFloat(document.getElementById(prefix + '00').value) || 0;
        m[0][1] = parseFloat(document.getElementById(prefix + '01').value) || 0;
        m[1][0] = parseFloat(document.getElementById(prefix + '10').value) || 0;
        m[1][1] = parseFloat(document.getElementById(prefix + '11').value) || 0;
        return m;
    }

    function displayResult(result) {
        document.getElementById('scalar-result').textContent = '';
        if (typeof result === 'number') {
            document.getElementById('scalar-result').textContent = `= ${result.toFixed(4)}`;
            ['r00','r01','r10','r11'].forEach(id => document.getElementById(id).textContent = '–');
        } else {
            document.getElementById('r00').textContent = result[0][0].toFixed(2);
            document.getElementById('r01').textContent = result[0][1].toFixed(2);
            document.getElementById('r10').textContent = result[1][0].toFixed(2);
            document.getElementById('r11').textContent = result[1][1].toFixed(2);
        }
    }

    document.getElementById('mat-add').addEventListener('click', () => {
        const a = readMatrix('a'); const b = readMatrix('b');
        const result = [[a[0][0] + b[0][0], a[0][1] + b[0][1]], [a[1][0] + b[1][0], a[1][1] + b[1][1]]];
        displayResult(result);
    });

    document.getElementById('mat-sub').addEventListener('click', () => {
        const a = readMatrix('a'); const b = readMatrix('b');
        const result = [[a[0][0] - b[0][0], a[0][1] - b[0][1]], [a[1][0] - b[1][0], a[1][1] - b[1][1]]];
        displayResult(result);
    });

    document.getElementById('mat-mul').addEventListener('click', () => {
        const a = readMatrix('a'); const b = readMatrix('b');
        const result = [
            [a[0][0] * b[0][0] + a[0][1] * b[1][0], a[0][0] * b[0][1] + a[0][1] * b[1][1]],
            [a[1][0] * b[0][0] + a[1][1] * b[1][0], a[1][0] * b[0][1] + a[1][1] * b[1][1]]
        ];
        displayResult(result);
    });

    document.getElementById('mat-det').addEventListener('click', () => {
        const a = readMatrix('a');
        const result = a[0][0] * a[1][1] - a[0][1] * a[1][0];
        displayResult(result);
    });
    
    document.getElementById('mat-trans').addEventListener('click', () => {
        const a = readMatrix('a');
        const result = [[a[0][0], a[1][0]], [a[0][1], a[1][1]]];
        displayResult(result);
    });

    document.getElementById('mat-inv').addEventListener('click', () => {
        const a = readMatrix('a');
        const det = a[0][0] * a[1][1] - a[0][1] * a[1][0];
        if (det === 0) {
            document.getElementById('scalar-result').textContent = 'No Inverse';
            return;
        }
        const invDet = 1 / det;
        const result = [
            [a[1][1] * invDet, -a[0][1] * invDet],
            [-a[1][0] * invDet, a[0][0] * invDet]
        ];
        displayResult(result);
    });
</script>

</body>
</html>

